<?phpinclude 'PHP/db_config.php';$connessione = mysql_connect($host, $user, $password);mysql_select_db($db, $connessione);//SELECT PARTECIPANTIclass Partecipanti{    public $idComp;    public $idSq;    public $countPartecipanti;    public $isPartecipante;    public $listPartecipanti = array();        public $debug;                   public function __construct($idSq) {        $query1 = "SELECT nome, cognome, id_user, ruolo FROM partecipanti WHERE id_squadra='$idSq' AND nome!='TAVOLINO' ORDER BY cognome";        $row1 = mysql_query($query1);                              $listPartecipanti = array();//        $this->debug = $query1;        $x=0;         while ($res = mysql_fetch_array($row1)) {            $listPartecipanti[$x]['id_user'] = $res['id_user'];            $listPartecipanti[$x]['nome'] = $res['nome'];            $listPartecipanti[$x]['cognome']= $res['cognome'];            $listPartecipanti[$x]['ruolo'] = $res['ruolo'];                                                $x++;        }        $this->countPartecipanti = $x;        $this->listPartecipanti = $listPartecipanti;            }        public function isPartecipante($nome, $cognome){                $this->isPartecipante = 0;                for($i=0; $i < count($this->listPartecipanti); $i++)        {            if($this->listPartecipanti[$i]['nome'] === $nome && $this->listPartecipanti[$i]['cognome'] === $cognome ){//                $idUser = $this->listPartecipanti[$i]['idUser'];                $this->isPartecipante = $this->listPartecipanti[$i]['id_user'];            }                    }            }        public function updatePartecipante($idUser, $nome, $cognome){                //Aggiorno Partecipanti         $query1 = "UPDATE partecipanti SET nome='$nome', cognome = '$cognome' WHERE id_user ='$idUser'";        $row1 = mysql_query($query1);                //Aggiorno Marcatori         $query1 = "UPDATE marcatori SET nome='$nome', cognome = '$cognome' WHERE id_user ='$idUser'";        $row1 = mysql_query($query1);                //Aggiorno Migliori         $query1 = "UPDATE miglior_g SET nome='$nome', cognome = '$cognome' WHERE id_user ='$idUser'";        $row1 = mysql_query($query1);                //Aggiorno Diffidati        $query1 = "UPDATE diffidati SET nome='$nome', cognome = '$cognome' WHERE id_user ='$idUser'";        $row1 = mysql_query($query1);    }        public function modPartecipante($idUser, $idUserMod, $nome, $cognome){                //elimino il partecipante sbagliato        $query1 = "DELETE FROM partecipanti WHERE id_user='$idUser'";        $row1 = mysql_query($query1);                //Aggiorno Marcatori         $query1 = "UPDATE marcatori SET nome='$nome', cognome = '$cognome', id_user = '$idUserMod' WHERE id_user ='$idUser'";        $row1 = mysql_query($query1);                //Aggiorno Migliori         $query1 = "UPDATE miglior_g SET nome='$nome', cognome = '$cognome', id_user = '$idUserMod' WHERE id_user ='$idUser'";        $row1 = mysql_query($query1);                //Aggiorno Diffidati        $query1 = "UPDATE diffidati SET nome='$nome', cognome = '$cognome', id_user = '$idUserMod' WHERE id_user ='$idUser'";        $row1 = mysql_query($query1);                   }}//INSERT PARTECIPANTEclass Partecipante{    public $idUser;    public function __construct($idComp, $idSq, $nome, $cognome) {        //id_comp='$idComp' AND        //id_comp='$idComp',        //check Partecipante        $query1 = "SELECT id_user FROM partecipanti WHERE  id_squadra='$idSq' AND nome='$nome' AND cognome='$cognome'";        $row1 = mysql_query($query1);          $countUser = mysql_num_rows($row1);        var_dump($countUser);        if($countUser === 0){            $query1 = "INSERT INTO partecipanti SET id_squadra='$idSq', nome='$nome', cognome='$cognome'";            $row1 = mysql_query($query1);            if (!$row1) {                var_dump("error __construct Partecipante ".$query1);            }else{                $this->idUser = mysql_insert_id();            }        }else{            //update id user            $res= mysql_fetch_array($row1);            $this->idUser = $res['id_user'];        }    }    }//CLÃ²ASSIFICAclass Classifica {    public $idComp;    public $idSq;    public $nome;    public function __construct($idComp, $idSq, $nome, $girone) {        $query1 = "INSERT INTO classifiche SET id_comp='$idComp', id_sq='$idSq', squadra='$nome', girone='$girone'";        $row1 = mysql_query($query1);        if (!$row1) {            var_dump("error __construct Classifica");        }    }}class ClassificaCamp {    public $idComp;    public $claCampionato = array();        public function __construct($idComp, $idSq, $nomeSq) {        $query1 = "SELECT squadra, girone, COUNT(id_partita) AS giocate,SUM(vinte) AS vinte, SUM(perse) AS perse, SUM(pareggiate) AS pareggiate, SUM(gol_subiti) AS golSubiti, SUM(punti) AS punti, SUM(gol_fatti) AS golFatti FROM classifiche  WHERE id_comp='$idComp' AND id_sq='$idSq' ORDER BY punti ";        $row1 = mysql_query($query1);//                   $res= mysql_fetch_array($row1);                 $this->claCampionato['squadra'] = $nomeSq;        $this->claCampionato['girone'] = $res['girone'];          $this->claCampionato['punti'] = $res['punti'];        $this->claCampionato['golFatti'] = $res['golFatti'];          $this->claCampionato['golSubiti'] = $res['golSubiti'];          $this->claCampionato['vinte'] = $res['vinte'];          $this->claCampionato['perse'] = $res['perse'];          $this->claCampionato['pareggiate'] = $res['pareggiate'];          $this->claCampionato['giocate'] = $res['giocate']-1;                                              }}class ClassificaMarc {    public $idComp;    public $claMarcatori;    public $mobileClaMarcatori;         public function __construct($idComp) {                //marcatori        $Mhtml="<div id=\"claHeaderM\" class=\"claRow claM\"> ";            $Mhtml.="<div style=\"width:30%;\" class=\"claCell\">Squadra</div>";            $Mhtml.="<div style=\"width:30%;\" class=\"claCell\">Cognome</div>";            $Mhtml.="<div style=\"width:30%;\" class=\"claCell\">Nome</div>";            $Mhtml.="<div style=\"width:10%;\" class=\"claCell\">Gol</div>";        $Mhtml.="</div>";                $query1 = "SELECT `nome`, `cognome`, `id_squadra`, SUM(`gol`) AS gol, `girone` FROM `marcatori` WHERE `id_comp`='$idComp' GROUP BY `cognome`,`id_squadra`, `nome` ORDER BY girone, gol DESC";        $row1 = mysql_query($query1);                           $html = "";                    $i=0;        $gironeTemp= 0;        $aMobile = array();//        $prova="";         while ($res = mysql_fetch_array($row1)) {                          if($res['girone'] !== $gironeTemp){                                                        if ($i === 0) {//                    $html.=$prova;                     $html.= "<div id=\"contentGirone\" class=\"contentRow\" >" ."<div class=\"contentLabel\" >Girone ".$res['girone']."</div>".$Mhtml;                } else {                    $html.= "</div><div id=\"contentGirone\" class=\"contentRow\" >" ."<div class=\"contentLabel\" >Girone ".$res['girone']."</div>". $Mhtml;                }                $i=0;                $gironeTemp=  $res['girone'];                            }                         $html.="<div id=\"claRow".$i." \" class=\"claRow\"> ";            $html.="<div id=\"nomeSq".$i."\" style=\"border-right: solid; width:30%;\" class=\"claCell\">".$res['id_squadra']."</div>";            $html.="<div id=\"nomeSq".$i."\" style=\"border-right: solid; width:29%;\" class=\"claCell\">".$res['cognome']."</div>";            $html.="<div id=\"nomeSq".$i."\" style=\"border-right: solid; width:30%;\" class=\"claCell\">".$res['nome']."</div>";                                 $html.="<div id=\"nomeSq".$i."\" style=\"width:9%;\" class=\"claCell\">".$res['gol']."</div>";            $html.="</div>";            if($i < 20){                //MOBILE                $this->mobileClaMarcatori[$i]['nome'] = $res['nome'];                $this->mobileClaMarcatori[$i]['cognome'] = $res['cognome'];                $this->mobileClaMarcatori[$i]['gol'] = $res['gol'];                $this->mobileClaMarcatori[$i]['squadra'] = $res['id_squadra'];            }             $i++;         }                      $html.="</div>";//         var_dump($html);                 $this->claMarcatori = $html;          }}class ClassificaMigliori {    public $idComp;    public $claMigliori = array();    public $mobileClaMigliori;            public function __construct($idComp) {        //migliori        $Mhtml="<div id=\"claHeaderMigliori\" class=\"claRow claM\"> ";            $Mhtml.="<div  class=\"W25 claCell\">Squadra</div>";            $Mhtml.="<div  class=\"W25 claCell\">Cognome</div>";            $Mhtml.="<div  class=\"W25 claCell\">Nome</div>";            $Mhtml.="<div  class=\"W25 claCell\">Migliori</div>";        $Mhtml.="</div>";        $query1 = "SELECT `nome`, `cognome`, `id_squadra`, COUNT(`id_squadra`) AS migliori, girone FROM `miglior_g` WHERE `id_comp`='$idComp' GROUP BY `cognome`, `nome` ORDER BY girone, migliori DESC";        $row1 = mysql_query($query1);//                          $return = array();        $html="";        $gironeTemp="";        $i=0;        $c=0;         while ($res = mysql_fetch_array($row1)) {                         if($res['girone'] !== $gironeTemp){                    $g++;                if ($i === 0) {//                    $html.=$prova;                    $html.= "<div id=\"contentGirone\" class=\"contentRow\" >" ."<div class=\"contentLabel\" >Girone ".$res['girone']."</div>".$Mhtml;                } else {                    $html.= "</div><div id=\"contentGirone\" class=\"contentRow\" >" ."<div class=\"contentLabel\" >Girone ".$res['girone']."</div>". $Mhtml;                }                $i=0;//                        $html[$g]=array();                $gironeTemp=  $res['girone'];                                                    }                          //creo la riga html             if($res['id_squadra'] !== "0"){                $html.="<div id=\"claRow".$i." \" class=\"claRow\"> ";                $html.="<div id=\"nomeSq".$i."\" class=\"W25 claCell\">".$res['id_squadra']."</div>";                $html.="<div id=\"nomeSq".$i."\" class=\"W25 claCell\">".$res['cognome']."</div>";                $html.="<div id=\"nomeSq".$i."\" class=\"W25 claCell\">".$res['nome']."</div>";                                         $html.="<div id=\"nomeSq".$i."\" class=\"W25 claCell\">".$res['migliori']."</div>";                $html.="</div>";             }                          if($i < 20 ){                //MOBILE                 if($res['cognome'] !== ""){                     $x = $i - $c;                     $this->mobileClaMigliori[$x]['nome'] = $res['nome'];                    $this->mobileClaMigliori[$x]['cognome'] = $res['cognome'];                    $this->mobileClaMigliori[$x]['migliori'] = $res['migliori'];                    $this->mobileClaMigliori[$x]['squadra'] = $res['id_squadra'];                 }else{                     $c++;                 }            }                        $i++;         }         $return[0]=$html;                        $return[1]=$Mhtml;         $this->claMigliori = $return;    }}class ClassificaDiffidati{        public $claDiffidati;    public $mobileClaDiffidati;        public function __construct($idComp) {                    $Mhtml="<div id=\"claHeaderMigliori\" class=\"claRow claM\"> ";            $Mhtml.="<div  class=\"W20 claCell\">Squadra</div>";            $Mhtml.="<div  class=\"W20 claCell\">Cognome</div>";            $Mhtml.="<div  class=\"W20 claCell\">Nome</div>";            $Mhtml.="<div  class=\"W20 claCell\">Rossi</div>";            $Mhtml.="<div  class=\"W20 claCell\">Gialli</div>";                    $Mhtml.="</div>";                $query1 = "SELECT `nome`, `cognome`, `id_squadra`, SUM(`gialli`) AS gialli, SUM(`rossi`) AS rossi, girone FROM `diffidati` WHERE `id_comp`='$idComp' GROUP BY `cognome`,`id_squadra`, `nome` ORDER BY girone, rossi DESC, gialli DESC";        $row1 = mysql_query($query1);                           $return = array();        $html="";        $i=0;        $gironeTemp=0;         while ($res = mysql_fetch_array($row1)) {                          if($res['girone'] !== $gironeTemp){                  if ($i === 0) {//                    $html.=$prova;                     $html.= "<div id=\"contentGirone\" class=\"contentRow\" >" ."<div class=\"contentLabel\" >Girone ".$res['girone']."</div>".$Mhtml;                } else {                    $html.= "</div><div id=\"contentGirone\" class=\"contentRow\" >" ."<div class=\"contentLabel\" >Girone ".$res['girone']."</div>". $Mhtml;                }                $i=0;                $gironeTemp=  $res['girone'];                             }                          //creo la riga html            $html.="<div id=\"claRow".$i." \" class=\"claRow\"> ";            $html.="<div id=\"nomeSq".$i."\" class=\"W20 claCell\">".$res['id_squadra']."</div>";            $html.="<div id=\"nomeSq".$i."\" class=\"W20 claCell\">".$res['cognome']."</div>";            $html.="<div id=\"nomeSq".$i."\" class=\"W20 claCell\">".$res['nome']."</div>";                                 $html.="<div id=\"nomeSq".$i."\" class=\"W20 claCell\">".$res['rossi']."</div>";            $html.="<div id=\"nomeSq".$i."\" class=\"W20 claCell\">".$res['gialli']."</div>";                        $html.="</div>";            if($i < 20 ){                //MOBILE                $this->mobileClaDiffidati[$i]['nome'] = $res['nome'];                $this->mobileClaDiffidati[$i]['cognome'] = $res['cognome'];                $this->mobileClaDiffidati[$i]['gialli'] = $res['gialli'];                $this->mobileClaDiffidati[$i]['rossi'] = $res['rossi'];                $this->mobileClaDiffidati[$i]['squadra'] = $res['id_squadra'];            }                        $i++;         }         $return[0]=$html;                        $return[1]=$Mhtml;         $this->claDiffidati = $return;    }}//PARTITAclass Partita {    private $query;    public $idPartita;    public $idComp;    public $giornata;    public $girone;    public $stato;    public $data;    public $ora;    public $sq1;    public $sq2;    public $idSq1;    public $idSq2;    public $risSq1;    public $risSq2;    public $AR;    //select     public $aPartite = array();    public $aMarcatori = array();    //selecMod    public $aModPartita = array();    public $autoComplete= array();    public function __construct($query, $idComp, $sq1, $sq2, $idSq1, $idSq2, $giornata, $girone, $AR) {        if ($query === "INSERT") {            $this->idComp = $idComp;            $this->sq1 = $sq1;            $this->sq2 = $sq2;            $this->idSq1 = $idSq1;            $this->idSq2 = $idSq2;            $this->giornata = $giornata;            $this->girone = $girone;            $this->AR = $AR;            $query1 = "INSERT INTO partite SET id_comp='$idComp', sq1 = '$sq1', sq2 = '$sq2', id_sq1 =" . $idSq1 . ", id_sq2 =" . $idSq2 . ", giornata = '$giornata', girone = '$girone', and_rit = '$AR'";            $row1 = mysql_query($query1);            if ($row1) {                $this->idPartita = mysql_insert_id();            } else {                var_dump("error 2");            }//          //        var_dump("INSERT INTO partite SET id_comp='$idComp', sq1 = '$sq1', sq2 = '$sq2', id_sq1 =".$idSq1.", id_sq2 =".$idSq2.", giornata = '$giornata', girone = '$girone', AR = '$AR'");        }                else if ($query === "SELECT") {            $query1 = "SELECT * FROM partite  WHERE id_comp='$idComp' ORDER BY girone, and_rit, giornata, data, id_sq2";            $row1 = mysql_query($query1);//            var_dump($query1);            $partita = array();            $i = 0;            $giornataTEMP = 0;            while ($res1 = mysql_fetch_array($row1)) {                $data = "";                if($res1['data']!== "0000-00-00 00:00:00"){                    $data = $res1['data'];                }                else {                    $data = "Inserisci la Data";                }                $partita['idPartita'] = $res1['id_partita'];                $partita['AR'] = $res1['and_rit'];                $partita['nomeSq1'] = $res1['sq1'];                $partita['nomeSq2'] = $res1['sq2'];                $partita['idSq1'] = $res1['id_sq1'];                $partita['idSq2'] = $res1['id_sq2'];                $partita['stato'] = $res1['stato'];                $partita['giornata'] = $res1['giornata'];                if ($partita['giornata'] !== $giornataTEMP) {                    $giornataTEMP = $partita['giornata'];                }                $stato="";                if($partita['stato'] === "1")                    $stato = "daGiocare" ;                else                    $stato = "Giocata";                $partita['girone'] = $res1['girone'];                if($stato === "daGiocare"){                    $partita['risSq1'] = "";                $partita['risSq2'] = "";                }else{                    $partita['risSq1'] = $res1['ris_sq1'];                    $partita['risSq2'] = $res1['ris_sq2'];                }                                                $partita['data'] = $res1['data'];                $partita['ora'] = $res1['ora'];                $partita['rowHtml'] = "";                $partita['rowHtml'].= "<div class=\"".$stato." partita \" ><div id=\"partita" . $partita['idPartita'] . "\" class=\" contentRow g" . $giornataTEMP .$partita['girone']."\" >";                               $partita['rowHtml'].=   "<div class=\"content1\" >";                $partita['rowHtml'].=       "<div id=\"sq1".$partita['idPartita']."\" >" . $partita['nomeSq1'] . "</div>";                $partita['rowHtml'].=   "</div>";                $partita['rowHtml'].=   "<div id=\"ris" . $partita['idPartita'] . "\" class=\"content2\" >";                $partita['rowHtml'].=       "<div id=\"r1\" >" . $partita['risSq1'] . "</div>";                $partita['rowHtml'].=       "<div id=\"r2\" >" . $partita['risSq2'] . "</div>";                $partita['rowHtml'].=   "</div>";                $partita['rowHtml'].=   "<div class=\"content1\" >";                $partita['rowHtml'].=       " <div id=\"sq2".$partita['idPartita']."\" >" . $partita['nomeSq2'] . "</div>";                $partita['rowHtml'].=   "</div>";                $partita['rowHtml'].= "</div>";                $partita['rowHtml'].= "<div id=\"opzPartita" . $partita['idPartita'] . "\" class=\"contentRow2 g" . $giornataTEMP .$partita['girone']."\" >";                $partita['rowHtml'].=   "<div class=\"content1\" >";                $partita['rowHtml'].=       "<div id=\"data". $partita['idPartita'] ."\" class=\"pointer\" onclick=\"openDialogData(". $partita['idPartita'] .")\"  >".$data."</div>";                $partita['rowHtml'].=   "</div>";                $partita['rowHtml'].=   "<div id=\"ora" . $partita['idPartita'] . "\" class=\"content3\" >Inserisci Ora </div>";                                               $partita['rowHtml'].=   "<div class=\"content1\" >";                $partita['rowHtml'].=       " <div id=\"video". $partita['idPartita'] ."\" class=\"pointer\" >Inserisci il Video</div>";                $partita['rowHtml'].=   "</div>";                                $partita['rowHtml'].= "</div></div>";                $this->aPartite[$i] = $partita;                                $i++;            }                    }                else if ($query === "SELECTMOD") {            $idPartita = $idComp;                        $query1 = "SELECT * FROM partite  WHERE id_partita='$idPartita' ";            $row1 = mysql_query($query1);            $res1 = mysql_fetch_array($row1);                        $return = array();            $return['nomeSq1'] = $res1['sq1'];            $return['nomeSq2'] = $res1['sq2'];            $return['idSq1'] = $res1['id_sq1'];            $return['idSq2'] = $res1['id_sq2'];            $return['stato'] = $res1['stato'];            $return['girone'] = $res1['girone'];            if ($return['stato'] === "2") {                $return['r1'] = $res1['ris_sq1'];                $return['r2'] = $res1['ris_sq2'];            }                        $return['giornata'] = $res1['giornata'];            $return['andRit'] = $res1['and_rit'];            $return['idComp'] = $res1['id_comp'];                                   //Marcatori            $query1 = "SELECT * FROM marcatori  WHERE id_partita=" . $idPartita . " ORDER BY id_squadra";            $row2 = mysql_query($query1);//                var_dump($query1);            $x = 0;            $marcatopri = array();            while ($res = mysql_fetch_array($row2)) {                $marcatopri[$x]['idSq'] = $res['id_squadra'];                $marcatopri[$x]['nome'] = $res['nome'];                $marcatopri[$x]['cognome'] = $res['cognome'];                $marcatopri[$x]['gol'] = $res['gol'];                $x++;            }            $return['marcatori'] = $marcatopri;                        //Migliori            $migliori = array();                        $query1 = "SELECT * FROM miglior_g  WHERE id_partita=" . $idPartita;            $row2 = mysql_query($query1);            $res = mysql_fetch_array($row2);                        $migliori[0]['nome'] = $res['nome'];            $migliori[0]['cognome'] = $res['cognome'];            $migliori[0]['squadra'] = $res['id_squadra'];                        $return['migliori'] = $migliori;                         //diffidati            $diffidati = array();            $query1 = "SELECT * FROM diffidati  WHERE id_partita=" . $idPartita;            $row3 = mysql_query($query1);            $i=0;            while ($res = mysql_fetch_array($row3)) {                                $diffidati[$i]['nome'] = $res['nome'];                $diffidati[$i]['cognome'] = $res['cognome'];                $diffidati[$i]['squadra'] = $res['id_squadra'];                $diffidati[$i]['gialli'] = $res['gialli'];                $diffidati[$i]['rossi'] = $res['rossi'];                $i++;            }            $return['diffidati'] = $diffidati;                        //autocomplete            $autoComplete = array();            $query1 = "SELECT * FROM partecipanti  WHERE id_comp=".$return['idComp']." AND (id_squadra=".$return['idSq1']." OR id_squadra=".$return['idSq2'].")";            $row4 = mysql_query($query1);//            $autoComplete[0] = $query1;//            $i=0;            while ($res = mysql_fetch_array($row4)) {                                array_push($autoComplete, array('nome' => $res['nome'], 'cognome' => $res['cognome']));//                $autoComplete[$i]['nome'] = $res['nome'];//                $autoComplete[$i]['cognome'] = $res['cognome'];//                $autoComplete[$i]['idSq'] = $res['id_squadra'];//                $autoComplete[$i]['idUser'] = $res['id_user'];////                $autoComplete[$i]['ruolo'] = $res['ruolo'];//                $i++;            }//             array_push($autoComplete, array("nome" => "autogol","cognome" => "autogol"));            $this->autoComplete = $autoComplete;                                    $this->aModPartita = $return;        }                 else if ($query === "UPDATE") {            $idPartita = $idComp;        }        else if ($query === "VIEWSQGIOCATORE") {            $idGiocatore = $idComp;                        $query1 = "SELECT * FROM partite  WHERE id_comp=".$return['idComp']." AND (id_squadra=".$return['idSq1']." OR id_squadra=".$return['idSq2'].")";            $row4 = mysql_query($query1);//            $autoComplete[0] = $query1;//            $i=0;            while ($res = mysql_fetch_array($row4)) {                                            }                    }                   }    public function getPartiteComp($idComp) {        return $this->aPartite;    }    public function getMarcatori() {        return $this->aMarcatori;    }}//SQUADRAclass Squadra {    public $idSquadra;    public $nome;        //SELECT    public $aSq = array();    public $sqHTML = array();    public $sqLatMenu = array();    public $viewSq = array();        //debug    public $debug;    public function __construct($query, $idComp, $nome, $girone) {        if ($query === "INSERT") {            $this->nome = $nome;            $query1 = "INSERT INTO squadre SET id_comp='$idComp', nome='$nome', tipo='campionato', girone='$girone'";            $row1 = mysql_query($query1);            if ($row1) {                $this->idSquadra = mysql_insert_id();            } else {                var_dump("error insert squadra");            }//        echo ($this->idSquadra);        }         else if ($query === "SELECT") {            //seleziono tutte le squadre della competizione             $sq = array();            $query1 = "SELECT * FROM squadre  WHERE id_comp='$idComp' ORDER BY girone, nome";            $row1 = mysql_query($query1);            $i = 0;            $y = 0;            $sqHTML = array();            $sqMenuLat= array();                        $gironeTemp="";            $rowSq = "";            while ($res1 = mysql_fetch_array($row1)) {                $sq[$res1['id_squadra']]['idSquadra'] = $res1['id_squadra'];                $sq[$res1['id_squadra']]['nome'] = $res1['nome'];                $sq[$res1['id_squadra']]['avatar'] = $res1['sq1'];                $sq[$res1['id_squadra']]['girone'] = $res1['girone'];                $sq[$res1['id_squadra']]['classifiche'] = $this->getClassifica($res1['id_comp'], $res1['id_squadra']);                $sq[$res1['id_squadra']]['debug'] = $this->debug;                                //Menu Laterale                //                if($res1['nome'] !== "undefined"){                                        $sqMenuLat[$y]['nome'] = $res1['nome'];                    $sqMenuLat[$y]['idSq'] = $res1['id_squadra'];                    $sqMenuLat[$y]['HTML'] ="<div onclick=\"viewSquadra(".$res1['id_squadra'].")\" class=\"MSL\"  id=\"MenuSqLat".$res1['id_squadra']."\">".$res1['nome']."</div>";                                                            $y++;                                                //                var vinteSq2 = "Vinte: " + dati['squadre'][ dati['partite'][i]['idSq2']]['classifiche']['vinte'];//                var perseSq2 = "Perse: " + dati['squadre'][ dati['partite'][i]['idSq2']]['classifiche']['perse'];//                var pariSq2  = "Pari: " + dati['squadre'][ dati['partite'][i]['idSq2']]['classifiche']['pari'];//                $RosaSq = new Partecipanti($idComp, $res1['id_squadra']);                //html                if($gironeTemp !== $res1['girone']){                    $rowSq = "<div  class=\"headerGironiSq\">Girone ".$res1['girone']."</div>";                    $gironeTemp = $res1['girone'];                    $sqHTML[$i]=$rowSq;                    $i++;                }                $rowSq = "<div  id=\"viewSquadra".$res1['id_squadra']."\" onclick=\"viewSquadra(".$res1['id_squadra'].")\" class=\"contentSq\" >";                    $rowSq.= "<div id=\"\" class=\"contentBody\" >";                        $rowSq.= "<div id=\"logoteam".$res1['id_squadra']."\" class=\"logoteam\" >";//                                                    $rowSq.= "</div>";                        $rowSq.= "<div id=\"contentInfo".$res1['id_squadra']."\" class=\"contentInfo\">";                            $rowSq.=$sq[$res1['id_squadra']]['nome']."</br>"."Punti:".$sq[$res1['id_squadra']]['classifiche']['punti']."</br>";                                        $rowSq.="Vinte: ".$sq[$res1['id_squadra']]['classifiche']['vinte']." Perse: ".$sq[$res1['id_squadra']]['classifiche']['perse']." Pari: ".$sq[$res1['id_squadra']]['classifiche']['pari']."</br>";                                                    $rowSq.= "</div>";                    $rowSq.= "</div>";                    $rowSq.= "<div id=\"claInfo".$res1['id_squadra']."\" class=\"contentFooter\" >";//                        $rowSq.="Vinte: ".$sq[$res1['id_squadra']]['classifiche']['vinte']." Perse: ".$sq[$res1['id_squadra']]['classifiche']['perse']." Pari: ".$sq[$res1['id_squadra']]['classifiche']['pari'];                                   $rowSq.= "</div>";                $rowSq.= "</div>";                                $sqHTML[$i]=$rowSq;                $i++;            }            $this->aSq = $sq;            $this->sqHTML = $sqHTML;            $this->sqLatMenu = $sqMenuLat;        }        else if ($query === "VIEWSQ"){                        $idSq = $idComp;            //seleziono i giocatori//            $query1 = "SELECT * FROM partecipanti WHERE id_squadra = '$idSq' ";//            $row1 = mysql_query($query1);            $i = 0;                        $RosaSq = new Partecipanti($idSq);                        $this->viewSq[$i]['headerHTML'] = "<div id=\"rows\" class=\"contentRow\">";                $this->viewSq[$i]['headerHTML'] .= "<div id=\"headerLabel\" class=\"contentLabel\"> <a class=\"menuGiocatore\">GIOCATORI(".$RosaSq->countPartecipanti.")</a> - <a class=\"menuGiocatore\" id=\"nuovo\">INSERISCI</a> - <a class=\"menuGiocatore\" id=\"modifica\">MODIFICA</a> - <a class=\"menuGiocatore\" id=\"elimina\">ELIMINA</a></div>";                $this->viewSq[$i]['headerHTML'] .= "<div id=\"opzGiocatore2\" class=\"contentLabel\"></div>";                    $this->viewSq[$i]['headerHTML'] .= "<div id=\"rowsHeader\" class=\"contentRowSq black BB\">";                    $this->viewSq[$i]['headerHTML'] .= "<div id=\"nome\"  class=\"contentNome\">COGNOME</div>";                    $this->viewSq[$i]['headerHTML'] .= "<div id=\"cognome\" class=\"contentNome\">NOME</div>";                $this->viewSq[$i]['headerHTML'] .= "</div>";            $this->viewSq[$i]['headerHTML'] .= "</div>";                            for ($i = 0; $i<$RosaSq->countPartecipanti; $i++) {                 $this->viewSq[$i]['nome'] = $RosaSq->listPartecipanti[$i]['nome'];                $this->viewSq[$i]['cognome'] = $RosaSq->listPartecipanti[$i]['cognome'];                $this->viewSq[$i]['idUser'] = $RosaSq->listPartecipanti[$i]['id_user'];                                                $this->viewSq[$i]['HTML'] = "<div id=\"row".$i."\"  onmouseover=\"over(this)\" onmouseout=\"out(this)\" class=\"contentRowSq row\">";                                        //checkBox                    $this->viewSq[$i]['HTML'] .= "<input type=\"checkbox\" value=\"".$i."\" onchange=\"setCheckBox(this, " . $this->viewSq[$i]['idUser'] . ", " . $idSq . ")\" id=\"checkBox".$i."\" class=\"checkBox display\" />";                                                                //cognome                    $this->viewSq[$i]['HTML'] .= "<div onclick=\"viewGiocatoreSq(" . $this->viewSq[$i]['idUser'] . ")\" id=\"cognome".$i."\" style=\"border-right: solid;\"  class=\"contentNome\" >".$this->viewSq[$i]['cognome']."</div>";                                                //nome                    $this->viewSq[$i]['HTML'] .= "<div onclick=\"viewGiocatoreSq(" . $this->viewSq[$i]['idUser'] . ")\" id=\"nome".$i."\" class=\"contentNome\" >".$this->viewSq[$i]['nome']."</div>";                                                                //ruolo//                  $this->viewSq[$i]['HTML'] .= "<div id=\"ruolo".$i."\" class=\"contentNome\" >".$this->viewSq[$i]['ruolo']."</div>";                                        $this->viewSq[$i]['HTML'] .= "</div>";                          }                       //debug//            array_push($this->viewSq, $query1);//            array_push(var_dump($row1));                                            }        else if($query === "VIEWSQGIOCATORE"){            $idGiocatore = $idComp;            $Partite = new Partita("VIEWSQGIOCATORE",$idGiocatore);        }    }//    public function Squadra($idSq){//        $this->viewSq = "ciao";//    }        public function getClassifica($idComp, $idSq) {        $query1 = "SELECT SUM(gol_fatti) AS gol_fatti, SUM(gol_subiti) AS gol_subiti, SUM(punti) AS Punti,  SUM(vinte) AS vinte, SUM(perse) AS perse, SUM(pareggiate) AS pareggiate FROM classifiche  WHERE id_comp='$idComp' AND id_sq='$idSq'";        $row1 = mysql_query($query1);//        $this->debug .= $query1;//         $this->debug ="";         while ($res1 = mysql_fetch_array($row1)) {            $classifica = array();//            $classifica['nomeSq'] = $res1['squadra'];            $classifica['vinte'] = $res1['vinte'];            $classifica['perse'] = $res1['perse'];            $classifica['pari'] = $res1['pareggiate'];            $classifica['golFatti'] = $res1['gol_fatti'];            $classifica['golSubiti'] = $res1['gol_subiti'];            $classifica['punti'] = $res1['Punti'];//            $this->debug .=  $classifica['punti'];                    }                return $classifica;    }    public function getSq($idSq) {        $query1 = "SELECT * FROM squadre  WHERE id_user='$idSq')";        $row1 = mysql_query($query1);        $res1 = mysql_fetch_array($row1);        return $res1['nome'];    }}//COMPETIZIONEclass Competizione {    public $idComp;    public $configurazione;    public $nome;    public $AR;    public $nSq;    public $nGironi;    public function __construct($idCamp, $query) {        if ($query === "INSERT") {            $this->idCamp = $idCamp;            $query1 = "INSERT INTO competizioni SET id_camp='$idCamp', nome='campionato'";            $row1 = mysql_query($query1);            if ($row1) {                $this->idComp = mysql_insert_id();            } else {                var_dump("error 2");            }//            var_dump($this->idComp);        }         else if ($query === "SELECT") {            $idComp = $idCamp;            $query1 = "SELECT * FROM competizioni WHERE id_comp='$idComp'";//             var_dump($query1);             $row1 = mysql_query($query1);            $res1 = mysql_fetch_array($row1);            $this->configurazione = $res1['conf'];                        $this->nome = $res1['nome'];            $this->nSq = $res1['n_sq'];            $this->nGironi = $res1['n_gironi'];            $this->AR = $res1['and_rit'];                        $this->idCamp = $res1['id_camp'];        }    }//--------------SET----------------------------------------    public function setConf($conf) {        $query1 = "UPDATE competizioni SET conf='$conf' WHERE id_comp='$this->idComp'";        $row1 = mysql_query($query1);//        var_dump($conf . "aaaaaaaaaaaa");    }    public function setIdStr($id_str) {        $query1 = "UPDATE competizioni SET id_str='$id_str' WHERE id_comp='$this->idComp'";        $row1 = mysql_query($query1);    }    public function setAR($AR){        $this->AR = $AR;         $query1 = "UPDATE competizioni SET and_rit='$AR' WHERE id_comp='$this->idComp'";        $row1 = mysql_query($query1);    }        public function setnSq($nSq) {        $this->nSq = $nSq;        $query1 = "UPDATE competizioni SET n_sq='$nSq' WHERE id_comp='$this->idComp'";        $row1 = mysql_query($query1);//        var_dump($this->nSq);    }    public function setnGironi($nGironi) {        $this->nGironi = $nGironi;        $query1 = "UPDATE competizioni SET n_gironi='$nGironi' WHERE id_comp='$this->idComp'";        $row1 = mysql_query($query1);//        var_dump($this->nSq);    }//--------------GET----------------------------------------    public function getnSq() {        return $this->nSq;    }    public function getnGironi() {        return $this->nGironi;    }    public function getNome() {        return $this->nome;    }    public function getConf() {        return $this->configurazione;    }    public function getAR() {        return $this->AR;    }//--------------------------------------------------------------}//CAMPIONATOclass Campionato {    public $idCamp;    public $nome;//    public $str;    public $comp = array();    public $idUser;    public  $preview = array();    public function __construct($query,$nome, $str, $idUser) {        if($query ===  "INSERT"){            $this->nome = $nome;//        $this->str = $str;            $this->idUser = $idUser;            $query1 = "INSERT INTO campionati SET id_org=$idUser, nome='$nome'";            $row1 = mysql_query($query1);            if ($row1) {                $this->idCamp = mysql_insert_id();            } else {                var_dump("error 1");            }                    }        else if($query === "SELECTCOMP"){            $idCamp = $nome;            $query1 = "SELECT * FROM competizioni WHERE id_camp='$idCamp' ORDER BY id_comp";            $row1 = mysql_query($query1);            $comp=array();            $i=0;            while ($res1 = mysql_fetch_array($row1)) {                $comp[$i]['id'] = $res1['id_comp'];                $comp[$i]['nome'] = $res1['nome'];                $comp[$i]['conf'] = $res1['conf'];                $comp[$i]['AR'] = $res1['and_rit'];               $comp[$i]['nSq'] = $res1['n_sq'];               $comp[$i]['nGironi'] = $res1['n_gironi'];                                                               $i++;            }            $this->comp = $comp;        }        else if($query === "PREVIEW"){            $idCamp = $nome;            $query1 = "SELECT * FROM campionati WHERE id_camp='$idCamp'";            $row1 = mysql_query($query1);            $res1 = mysql_fetch_array($row1);                        $preview=array();            $preview['nome'] = $res1['nome'];            $preview['idOrg'] = $res1['id_org'];            $preview['avatar'] = $res1['avatar'];            $this->preview = $preview;                    }        //            }}//ORGANIZZATOREclass Organizzatore {//    public $nomeStr;    public $ipStr = array();    public $user;    public $campionati = array();    public function __construct($user) {        if($user !== ""){        $this->ipStr = array();        $this->user = $user;        $query1 = "SELECT id_str, nome FROM struttura ";        $row1 = mysql_query($query1);        $i = 0;        while ($res1 = mysql_fetch_array($row1)) {            $this->ipStr[$i]['id_str'] = $res1['id_str'];            $this->ipStr[$i]['nome'] = $res1['nome'];            $i++;        }        $user1 = $this->user;        $query1 = "SELECT * FROM campionati WHERE id_org='$user1->id_u'";        $row1 = mysql_query($query1);        $i = 0;        while ($res1 = mysql_fetch_array($row1)) {            $this->campionati[$i]['nome'] = $res1['nome'];            $this->campionati[$i]['idCamp'] = $res1['id_camp'];            $this->campionati[$i]['idComp'] = $this->getFirdtComp($this->campionati[$i]['idCamp']);                                                $i++;        }    }else{        $this->user = "ciao";    }//        $user = parent::getUser();    }//    public function getOgject(){//        //        return json_encode($this->o);//    }    public function getFirdtComp($idCamp) {                $query1 = "SELECT * FROM competizioni WHERE id_camp='$idCamp' ORDER BY id_comp";        $row1 = mysql_query($query1);                $comp=array();        $i=0;                while ($res1 = mysql_fetch_array($row1)) {            $comp[$i] = $res1['id_comp'];            $i++;        }        return $comp;    }    public function getCamp($idOrg) {        echo json_encode($this->campionati);    }    public function getIpStr() {        echo json_encode($this->ipStr);    }    public function getId() {        return $this->user;    }    public function getAvatar() {        echo ($this->avatar);    }    public function getUserName() {        return $this->username;    }}////USER//class User {////    public $id_u;//    public $username;//    public $email;//    public $id_profilo;//    public $avatar;////    public function __construct($id_u) {////        $this->id_u = $id_u;////////        $query = "SELECT * FROM users WHERE id_user='$this->id_u' ";////        $row = mysql_query($query);////        $res = mysql_fetch_array($row);////////        $this->email = $res['email'];////        $this->username = $res['username'];////        $this->id_profilo = $res['profilo'];////        $this->avatar = $res['avatar'];//    }////    static function getUser() {////        return $this;//    }////}